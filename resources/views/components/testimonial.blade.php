{{-- <!-- testimonials-section.blade.php -->
<section class="py-20 overflow-hidden">
    <div class="max-w-full mx-auto flex flex-col lg:flex-row">
        <!-- Left Side - Vertical "TESTIMONIALS" Text -->
        <div class="flex-shrink-0 relative pl-4 md:pl-6 lg:pl-8 mb-8 lg:mb-0">
            <div class="h-full flex lg:items-center">
                <h3 class="font-display text-[50px] md:text-[70px] lg:text-[90px] uppercase tracking-wider lg:rotate-180 whitespace-nowrap" style="writing-mode: vertical-rl; color: #1E1E1E17;">
                    TESTIMONIALS
                </h3>
            </div>
        </div>

        <!-- Middle - Main Heading -->
        <div class="flex-shrink-0 px-6 md:px-8 lg:px-12 py-8 flex flex-col justify-center w-full lg:w-auto lg:max-w-md">
            <h2 class="font-display text-[32px] md:text-[40px] lg:text-[48px] text-[var(--color-dark-blue)] mb-4 lg:mb-6 leading-tight">
                What our<br>client say<br>about us
            </h2>
            <p class="text-gray-700 text-[15px] md:text-[16px] lg:text-[18px] leading-relaxed">
                Wheelitin is revolutionizing the auto repair industry by creating a transparent.
            </p>
        </div>

        <!-- Right Side - Testimonials Carousel -->
        <div class="flex-1 py-8 min-w-0 overflow-hidden max-w-[600px] sm:max-w-[680px] md:max-w-[740px] lg:max-w-[800px] ml-auto">
            <div class="flex flex-col">
                <!-- Testimonials Container -->
                <div class="testimonials-wrapper overflow-hidden pr-0">
                    <div class="testimonials-track flex gap-4 md:gap-6 transition-transform duration-500 ease-in-out">
                        <!-- Testimonial Card 1 -->
                        <div class="testimonial-card flex-shrink-0 w-[280px] sm:w-[320px] md:w-[340px] lg:w-[360px]">
                            <div class="bg-white rounded-[16px] md:rounded-[20px] overflow-hidden shadow-lg border-4 md:border-[6px] border-[var(--color-sky-blue)]">
                                <img 
                                    src="https://images.unsplash.com/photo-1580489944761-15a19d654956?w=500&h=400&fit=crop" 
                                    alt="Jane Alfred" 
                                    class="w-full h-[200px] sm:h-[220px] md:h-[240px] object-cover"
                                />
                                <div class="px-4 md:px-6 py-4 md:py-5 bg-white">
                                    <h4 class="font-display text-[18px] md:text-[22px] text-[var(--color-dark-blue)] mb-2 uppercase">
                                        Jane Alfred
                                    </h4>
                                    <p class="text-gray-600 text-[14px] md:text-[15px] leading-relaxed">
                                        Wheelitin is revolutionizing the auto repair industry by creating a transparent.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Testimonial Card 2 -->
                        <div class="testimonial-card flex-shrink-0 w-[280px] sm:w-[320px] md:w-[340px] lg:w-[360px]">
                            <div class="bg-white rounded-[16px] md:rounded-[20px] overflow-hidden shadow-lg border-4 md:border-[6px] border-[var(--color-sun)]">
                                <img 
                                    src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=500&h=400&fit=crop" 
                                    alt="Sarah Johnson" 
                                    class="w-full h-[200px] sm:h-[220px] md:h-[240px] object-cover"
                                />
                                <div class="px-4 md:px-6 py-4 md:py-5 bg-white">
                                    <h4 class="font-display text-[18px] md:text-[22px] text-[var(--color-dark-blue)] mb-2 uppercase">
                                        Sarah Johnson
                                    </h4>
                                    <p class="text-gray-600 text-[14px] md:text-[15px] leading-relaxed">
                                        Wheelitin is revolutionizing the auto repair industry by creating a transparent.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Testimonial Card 3 -->
                        <div class="testimonial-card flex-shrink-0 w-[280px] sm:w-[320px] md:w-[340px] lg:w-[360px]">
                            <div class="bg-white rounded-[16px] md:rounded-[20px] overflow-hidden shadow-lg border-4 md:border-[6px] border-[var(--color-sky-blue)]">
                                <img 
                                    src="https://images.unsplash.com/photo-1580489944761-15a19d654956?w=500&h=400&fit=crop" 
                                    alt="Mike Roberts" 
                                    class="w-full h-[200px] sm:h-[220px] md:h-[240px] object-cover"
                                />
                                <div class="px-4 md:px-6 py-4 md:py-5 bg-white">
                                    <h4 class="font-display text-[18px] md:text-[22px] text-[var(--color-dark-blue)] mb-2 uppercase">
                                        Mike Roberts
                                    </h4>
                                    <p class="text-gray-600 text-[14px] md:text-[15px] leading-relaxed">
                                        Wheelitin is revolutionizing the auto repair industry by creating a transparent.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Testimonial Card 4 -->
                        <div class="testimonial-card flex-shrink-0 w-[280px] sm:w-[320px] md:w-[340px] lg:w-[360px]">
                            <div class="bg-white rounded-[16px] md:rounded-[20px] overflow-hidden shadow-lg border-4 md:border-[6px] border-[var(--color-sun)]">
                                <img 
                                    src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=500&h=400&fit=crop" 
                                    alt="Emma Wilson" 
                                    class="w-full h-[200px] sm:h-[220px] md:h-[240px] object-cover"
                                />
                                <div class="px-4 md:px-6 py-4 md:py-5 bg-white">
                                    <h4 class="font-display text-[18px] md:text-[22px] text-[var(--color-dark-blue)] mb-2 uppercase">
                                        Emma Wilson
                                    </h4>
                                    <p class="text-gray-600 text-[14px] md:text-[15px] leading-relaxed">
                                        Wheelitin is revolutionizing the auto repair industry by creating a transparent.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons - positioned between card centers -->
                <div class="relative mt-6 pr-4 md:pr-6 lg:pr-8">
                    <div class="navigation-controls flex items-center">
                        <button onclick="previousTestimonial()" class="w-12 h-12 md:w-14 md:h-14 bg-[var(--color-sun)] rounded-full flex items-center justify-center hover:bg-[var(--color-orange)] transition-colors shadow-lg flex-shrink-0 z-10">
                            <svg class="w-5 h-5 md:w-6 md:h-6 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 19l-7-7 7-7"/>
                            </svg>
                        </button>
                        
                        <!-- Line between buttons -->
                        <div class="h-0.5 bg-gray-400 flex-1"></div>
                        
                        <button onclick="nextTestimonial()" class="w-12 h-12 md:w-14 md:h-14 bg-[var(--color-sun)] rounded-full flex items-center justify-center hover:bg-[var(--color-orange)] transition-colors shadow-lg flex-shrink-0 z-10">
                            <svg class="w-5 h-5 md:w-6 md:h-6 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
.navigation-controls {
    /* Position controls to span between the centers of first two cards */
    width: calc(100% - 140px); /* Account for half card on each side */
    margin: 0 auto;
    max-width: 680px; /* Approximate width for 2 cards + gap + margins */
}

@media (min-width: 640px) {
    .navigation-controls {
        width: calc(100% - 160px);
        max-width: 720px;
    }
}

@media (min-width: 768px) {
    .navigation-controls {
        width: calc(100% - 170px);
        max-width: 760px;
    }
}

@media (min-width: 1024px) {
    .navigation-controls {
        width: calc(100% - 180px);
        max-width: 800px;
    }
}
</style>

<script>
let currentIndex = 0;
const totalCards = 4; // Total number of actual cards

function getCardWidth() {
    const card = document.querySelector('.testimonial-card');
    return card ? card.offsetWidth : 0;
}

function getGap() {
    return window.innerWidth >= 768 ? 24 : 16;
}

function updateCarousel(animate = true) {
    const track = document.querySelector('.testimonials-track');
    const cardWidth = getCardWidth();
    const gap = getGap();
    
    if (!animate) {
        track.style.transition = 'none';
    } else {
        track.style.transition = 'transform 0.5s ease-in-out';
    }
    
    track.style.transform = `translateX(-${currentIndex * (cardWidth + gap)}px)`;
}

function nextTestimonial() {
    currentIndex++;
    
    // Loop back to start when reaching the end
    if (currentIndex >= totalCards) {
        currentIndex = 0;
    }
    
    updateCarousel(true);
}

function previousTestimonial() {
    currentIndex--;
    
    // Loop to end when going before start
    if (currentIndex < 0) {
        currentIndex = totalCards - 1;
    }
    
    updateCarousel(true);
}

// Adjust on window resize
let resizeTimer;
window.addEventListener('resize', () => {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(() => {
        updateCarousel(false);
    }, 100);
});

// Initialize
updateCarousel(false);
</script> --}}




<!-- testimonials-section.blade.php -->
<section class="py-12 md:py-16 lg:py-20 overflow-hidden bg-[#F5F5F5] lg:bg-transparent">
    <div class="max-w-full mx-auto">
        <!-- Mobile Layout (< lg) -->
        <div class="lg:hidden">
            <!-- Header Section -->
            <div class="px-4 sm:px-6 mb-8">
                <h2 class="font-display text-[24px] sm:text-[28px] text-[var(--color-dark-blue)] mb-3 leading-tight uppercase text-center">
                    What our client<br>say about us
                </h2>
                <p class="text-gray-700 text-[14px] sm:text-[15px] leading-relaxed text-center max-w-md mx-auto">
                    Wheelitin is revolutionizing the auto repair industry by creating a transparent.
                </p>
            </div>

            <!-- Testimonials with Vertical Text -->
            <div class="flex items-start">
                <!-- Vertical TESTIMONIALS text -->
                <div class="flex-shrink-0 pl-2 pr-1">
                    <h3 class="font-display text-[40px] sm:text-[50px] uppercase tracking-wider rotate-180 whitespace-nowrap" style="writing-mode: vertical-rl; color: #1E1E1E17;">
                        TESTIMONIALS
                    </h3>
                </div>

                <!-- Carousel -->
                <div class="flex-1 min-w-0">
                    <div class="testimonials-wrapper overflow-hidden pr-4">
                        <div class="testimonials-track flex gap-3 sm:gap-4 transition-transform duration-500 ease-in-out">
                            <!-- Testimonial Card 1 -->
                            <div class="testimonial-card flex-shrink-0 w-[240px] sm:w-[260px]">
                                <div class="bg-white rounded-[16px] overflow-hidden shadow-lg border-4 border-[var(--color-sky-blue)]">
                                    <img 
                                        src="https://images.unsplash.com/photo-1580489944761-15a19d654956?w=500&h=400&fit=crop" 
                                        alt="Jane Alfred" 
                                        class="w-full h-[200px] sm:h-[220px] object-cover"
                                    />
                                    <div class="px-4 py-4 bg-white">
                                        <h4 class="font-display text-[16px] sm:text-[18px] text-[var(--color-dark-blue)] mb-2 uppercase">
                                            Jane Alfred
                                        </h4>
                                        <p class="text-gray-600 text-[13px] sm:text-[14px] leading-relaxed">
                                            Wheelitin is revolutionizing the auto repair industry by creating a transparent.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Testimonial Card 2 -->
                            <div class="testimonial-card flex-shrink-0 w-[240px] sm:w-[260px]">
                                <div class="bg-white rounded-[16px] overflow-hidden shadow-lg border-4 border-[var(--color-sun)]">
                                    <img 
                                        src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=500&h=400&fit=crop" 
                                        alt="Sarah Johnson" 
                                        class="w-full h-[200px] sm:h-[220px] object-cover"
                                    />
                                    <div class="px-4 py-4 bg-white">
                                        <h4 class="font-display text-[16px] sm:text-[18px] text-[var(--color-dark-blue)] mb-2 uppercase">
                                            Sarah Johnson
                                        </h4>
                                        <p class="text-gray-600 text-[13px] sm:text-[14px] leading-relaxed">
                                            Wheelitin is revolutionizing the auto repair industry by creating a transparent.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Testimonial Card 3 -->
                            <div class="testimonial-card flex-shrink-0 w-[240px] sm:w-[260px]">
                                <div class="bg-white rounded-[16px] overflow-hidden shadow-lg border-4 border-[var(--color-sky-blue)]">
                                    <img 
                                        src="https://images.unsplash.com/photo-1580489944761-15a19d654956?w=500&h=400&fit=crop" 
                                        alt="Mike Roberts" 
                                        class="w-full h-[200px] sm:h-[220px] object-cover"
                                    />
                                    <div class="px-4 py-4 bg-white">
                                        <h4 class="font-display text-[16px] sm:text-[18px] text-[var(--color-dark-blue)] mb-2 uppercase">
                                            Mike Roberts
                                        </h4>
                                        <p class="text-gray-600 text-[13px] sm:text-[14px] leading-relaxed">
                                            Wheelitin is revolutionizing the auto repair industry by creating a transparent.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Testimonial Card 4 -->
                            <div class="testimonial-card flex-shrink-0 w-[240px] sm:w-[260px]">
                                <div class="bg-white rounded-[16px] overflow-hidden shadow-lg border-4 border-[var(--color-sun)]">
                                    <img 
                                        src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=500&h=400&fit=crop" 
                                        alt="Emma Wilson" 
                                        class="w-full h-[200px] sm:h-[220px] object-cover"
                                    />
                                    <div class="px-4 py-4 bg-white">
                                        <h4 class="font-display text-[16px] sm:text-[18px] text-[var(--color-dark-blue)] mb-2 uppercase">
                                            Emma Wilson
                                        </h4>
                                        <p class="text-gray-600 text-[13px] sm:text-[14px] leading-relaxed">
                                            Wheelitin is revolutionizing the auto repair industry by creating a transparent.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="mt-6 pr-4">
                        <div class="flex items-center justify-center gap-4">
                            <button onclick="previousTestimonial()" class="w-12 h-12 sm:w-14 sm:h-14 bg-[var(--color-sun)] rounded-full flex items-center justify-center hover:bg-[var(--color-orange)] transition-colors shadow-lg active:scale-95">
                                <svg class="w-5 h-5 sm:w-6 sm:h-6 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 19l-7-7 7-7"/>
                                </svg>
                            </button>
                            
                            <button onclick="nextTestimonial()" class="w-12 h-12 sm:w-14 sm:h-14 bg-[var(--color-sun)] rounded-full flex items-center justify-center hover:bg-[var(--color-orange)] transition-colors shadow-lg active:scale-95">
                                <svg class="w-5 h-5 sm:w-6 sm:h-6 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Desktop Layout (lg+) -->
        <div class="hidden lg:flex">
            <!-- Left Side - Vertical "TESTIMONIALS" Text -->
            <div class="flex-shrink-0 relative pl-8">
                <div class="h-full flex items-center">
                    <h3 class="font-display text-[90px] uppercase tracking-wider rotate-180 whitespace-nowrap" style="writing-mode: vertical-rl; color: #1E1E1E17;">
                        TESTIMONIALS
                    </h3>
                </div>
            </div>

            <!-- Middle - Main Heading -->
            <div class="flex-shrink-0 px-12 py-8 flex flex-col justify-center w-auto max-w-md">
                <h2 class="font-display text-[48px] text-[var(--color-dark-blue)] mb-6 leading-tight uppercase">
                    What our<br>client say<br>about us
                </h2>
                <p class="text-gray-700 text-[18px] leading-relaxed">
                    Wheelitin is revolutionizing the auto repair industry by creating a transparent.
                </p>
            </div>

            <!-- Right Side - Testimonials Carousel -->
            <div class="flex-1 py-8 min-w-0 overflow-hidden max-w-[800px] ml-auto">
                <div class="flex flex-col">
                    <!-- Testimonials Container -->
                    <div class="testimonials-wrapper overflow-hidden pr-8">
                        <div class="testimonials-track flex gap-6 transition-transform duration-500 ease-in-out">
                            <!-- Testimonial Card 1 -->
                            <div class="testimonial-card flex-shrink-0 w-[360px]">
                                <div class="bg-white rounded-[20px] overflow-hidden shadow-lg border-[6px] border-[var(--color-sky-blue)]">
                                    <img 
                                        src="https://images.unsplash.com/photo-1580489944761-15a19d654956?w=500&h=400&fit=crop" 
                                        alt="Jane Alfred" 
                                        class="w-full h-[240px] object-cover"
                                    />
                                    <div class="px-6 py-5 bg-white">
                                        <h4 class="font-display text-[22px] text-[var(--color-dark-blue)] mb-2 uppercase">
                                            Jane Alfred
                                        </h4>
                                        <p class="text-gray-600 text-[15px] leading-relaxed">
                                            Wheelitin is revolutionizing the auto repair industry by creating a transparent.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Testimonial Card 2 -->
                            <div class="testimonial-card flex-shrink-0 w-[360px]">
                                <div class="bg-white rounded-[20px] overflow-hidden shadow-lg border-[6px] border-[var(--color-sun)]">
                                    <img 
                                        src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=500&h=400&fit=crop" 
                                        alt="Sarah Johnson" 
                                        class="w-full h-[240px] object-cover"
                                    />
                                    <div class="px-6 py-5 bg-white">
                                        <h4 class="font-display text-[22px] text-[var(--color-dark-blue)] mb-2 uppercase">
                                            Sarah Johnson
                                        </h4>
                                        <p class="text-gray-600 text-[15px] leading-relaxed">
                                            Wheelitin is revolutionizing the auto repair industry by creating a transparent.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Testimonial Card 3 -->
                            <div class="testimonial-card flex-shrink-0 w-[360px]">
                                <div class="bg-white rounded-[20px] overflow-hidden shadow-lg border-[6px] border-[var(--color-sky-blue)]">
                                    <img 
                                        src="https://images.unsplash.com/photo-1580489944761-15a19d654956?w=500&h=400&fit=crop" 
                                        alt="Mike Roberts" 
                                        class="w-full h-[240px] object-cover"
                                    />
                                    <div class="px-6 py-5 bg-white">
                                        <h4 class="font-display text-[22px] text-[var(--color-dark-blue)] mb-2 uppercase">
                                            Mike Roberts
                                        </h4>
                                        <p class="text-gray-600 text-[15px] leading-relaxed">
                                            Wheelitin is revolutionizing the auto repair industry by creating a transparent.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Testimonial Card 4 -->
                            <div class="testimonial-card flex-shrink-0 w-[360px]">
                                <div class="bg-white rounded-[20px] overflow-hidden shadow-lg border-[6px] border-[var(--color-sun)]">
                                    <img 
                                        src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=500&h=400&fit=crop" 
                                        alt="Emma Wilson" 
                                        class="w-full h-[240px] object-cover"
                                    />
                                    <div class="px-6 py-5 bg-white">
                                        <h4 class="font-display text-[22px] text-[var(--color-dark-blue)] mb-2 uppercase">
                                            Emma Wilson
                                        </h4>
                                        <p class="text-gray-600 text-[15px] leading-relaxed">
                                            Wheelitin is revolutionizing the auto repair industry by creating a transparent.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="relative mt-6 pr-8">
                        <div class="navigation-controls flex items-center">
                            <button onclick="previousTestimonial()" class="w-14 h-14 bg-[var(--color-sun)] rounded-full flex items-center justify-center hover:bg-[var(--color-orange)] transition-colors shadow-lg flex-shrink-0 z-10">
                                <svg class="w-6 h-6 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 19l-7-7 7-7"/>
                                </svg>
                            </button>
                            
                            <div class="h-0.5 bg-gray-400 flex-1"></div>
                            
                            <button onclick="nextTestimonial()" class="w-14 h-14 bg-[var(--color-sun)] rounded-full flex items-center justify-center hover:bg-[var(--color-orange)] transition-colors shadow-lg flex-shrink-0 z-10">
                                <svg class="w-6 h-6 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
.navigation-controls {
    width: calc(100% - 180px);
    margin: 0 auto;
    max-width: 800px;
}

/* Touch-friendly improvements */
@media (hover: none) and (pointer: coarse) {
    .testimonial-card {
        cursor: grab;
    }
    
    .testimonial-card:active {
        cursor: grabbing;
    }
}
</style>

<script>
let currentIndex = 0;
const totalCards = 4;
let startX = 0;
let currentX = 0;
let isDragging = false;

function getCardWidth() {
    const card = document.querySelector('.testimonial-card');
    return card ? card.offsetWidth : 0;
}

function getGap() {
    if (window.innerWidth >= 1024) return 24;
    if (window.innerWidth >= 640) return 16;
    return 12;
}

function updateCarousel(animate = true) {
    const track = document.querySelector('.testimonials-track');
    const cardWidth = getCardWidth();
    const gap = getGap();
    
    if (!animate) {
        track.style.transition = 'none';
    } else {
        track.style.transition = 'transform 0.5s ease-in-out';
    }
    
    track.style.transform = `translateX(-${currentIndex * (cardWidth + gap)}px)`;
}

function nextTestimonial() {
    currentIndex++;
    
    if (currentIndex >= totalCards) {
        currentIndex = 0;
    }
    
    updateCarousel(true);
}

function previousTestimonial() {
    currentIndex--;
    
    if (currentIndex < 0) {
        currentIndex = totalCards - 1;
    }
    
    updateCarousel(true);
}

// Touch/Swipe Support
const tracks = document.querySelectorAll('.testimonials-track');

tracks.forEach(track => {
    track.addEventListener('touchstart', (e) => {
        startX = e.touches[0].clientX;
        isDragging = true;
        track.style.transition = 'none';
    });

    track.addEventListener('touchmove', (e) => {
        if (!isDragging) return;
        currentX = e.touches[0].clientX;
        const diff = currentX - startX;
        const cardWidth = getCardWidth();
        const gap = getGap();
        const currentOffset = -currentIndex * (cardWidth + gap);
        track.style.transform = `translateX(${currentOffset + diff}px)`;
    });

    track.addEventListener('touchend', (e) => {
        if (!isDragging) return;
        isDragging = false;
        
        const diff = currentX - startX;
        const threshold = 50;
        
        if (Math.abs(diff) > threshold) {
            if (diff > 0) {
                previousTestimonial();
            } else {
                nextTestimonial();
            }
        } else {
            updateCarousel(true);
        }
    });

    // Mouse drag support for desktop
    track.addEventListener('mousedown', (e) => {
        startX = e.clientX;
        isDragging = true;
        track.style.cursor = 'grabbing';
        track.style.transition = 'none';
    });

    track.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        e.preventDefault();
        currentX = e.clientX;
        const diff = currentX - startX;
        const cardWidth = getCardWidth();
        const gap = getGap();
        const currentOffset = -currentIndex * (cardWidth + gap);
        track.style.transform = `translateX(${currentOffset + diff}px)`;
    });

    track.addEventListener('mouseup', (e) => {
        if (!isDragging) return;
        isDragging = false;
        track.style.cursor = 'grab';
        
        const diff = currentX - startX;
        const threshold = 50;
        
        if (Math.abs(diff) > threshold) {
            if (diff > 0) {
                previousTestimonial();
            } else {
                nextTestimonial();
            }
        } else {
            updateCarousel(true);
        }
    });

    track.addEventListener('mouseleave', () => {
        if (isDragging) {
            isDragging = false;
            track.style.cursor = 'grab';
            updateCarousel(true);
        }
    });
});

// Adjust on window resize
let resizeTimer;
window.addEventListener('resize', () => {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(() => {
        updateCarousel(false);
    }, 100);
});

// Initialize
updateCarousel(false);
</script>